<div class="row">
  <div class="col-lg-10 col-md-10 col-sm-10 margin-bottom-10">
    <h3 style="color:#8F9CB3"> {{authService.currentUser?.first_name}}</h3>
  </div>
</div>
<nb-card>
  <nb-card-body>
    <app-loading *ngIf="!loaded"></app-loading>
    <ng-container *ngIf="loaded">
      <form [formGroup]="form">

        <div class="d-flex justify-content-center align-items-center">
          <label tabindex="0" class="lbl-img res-img" for="my-file-3">
            <a>
              <div class="avatar-img text-center mbmd" style="width: 100%;min-height: 125px;">
                <img [src]='img' for="my-file-3" class="m-t-15 rounded-circle image " for="my-file-3" width="100%" height="125px" *ngIf="img">
                <img src='../../../assets/images/user.png' class="m-t-15 rounded-circle image " for="my-file-3"
                  width="50%" *ngIf="!img">
                <input class="input-file" id="my-file-3" type="file" style="display :none"
                  accept="image/x-png,image/gif,image/jpeg" (change)="onSelectFile($event)"
                  class="select-profile-picture">
                <input class="input-file" id="my-file-3" type="file" style="display :none"
                  (change)="onSelectFile($event)" class="select-profile-picture">
              </div>
            </a>
          </label>
        </div>
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 m-b-12">
            <div class="form-group">
              <label class="label"> {{'employee.email' | translate }}

              </label>
              <input formControlName="email" type="email" nbInput fullWidth
                [ngClass]="{'has-danger':form.get('email').invalid && form.get('email').dirty}">
              <span class="has-danger"
                *ngIf="form.get('email').invalid && form.get('email').dirty">{{ 'share.required' | translate }}</span>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 m-b-12">
            <div class="form-group">
              <label class="label"> {{'employee.phone' | translate }}
              </label>
              <input formControlName="phone" type="tel" nbInput fullWidth
                [ngClass]="{'has-danger':form.get('phone').invalid && form.get('phone').dirty}">
              <span class="has-danger"
                *ngIf="form.get('phone').invalid && form.get('phone').dirty">{{ 'share.required' | translate }}</span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 m-b-12">
            <div class="form-group">
              <label class="label"> {{'employee.firstname' | translate }}
              </label>
              <input formControlName="first_name"
                [ngClass]="{'has-danger':form.get('first_name').invalid && form.get('first_name').dirty}" type="text"
                nbInput fullWidth>
              <span class="has-danger"
                *ngIf="form.get('first_name').invalid && form.get('first_name').dirty">{{ 'share.requiredandfourdigit' | translate }}</span>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 m-b-12">
            <div class="form-group">
              <label class="label"> {{'employee.lastname' | translate }}
              </label>
              <input formControlName="last_name" type="text" nbInput fullWidth
                [ngClass]="{'has-danger':form.get('last_name').invalid && form.get('last_name').dirty}">
              <span class="has-danger"
                *ngIf="form.get('last_name').invalid && form.get('last_name').dirty">{{ 'share.requiredandfourdigit' | translate }}</span>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 m-b-12">
            <div class="form-group">
              <label class="label"> {{'employee.address' | translate }}
              </label>

              <textarea formControlName="address" rows="5" nbInput fullWidth shape="round"
                [ngClass]="{'has-danger':form.get('address').invalid && form.get('address').dirty}"></textarea>
              <span class="has-danger"
                *ngIf="form.get('address').invalid && form.get('address').dirty">{{ 'share.requiredandfourdigit' | translate }}</span>
            </div>
          </div>


        </div>


        <div class="row">


          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 m-b-12">
            <label class="label"> {{'employee.country' | translate }}
            </label>
            <ng-select (change)="onChangeCountry($event)" placeholder="{{'employee.country'|translate}}" [multiple]="false" formControlName="country_id">
              <ng-option *ngFor="let row of country" [value]="row.id" [disabled]="row.disabled">
                {{languageService.getLanguageOrDefault()=='ar' ? row.name_arabic :row.name_english}}</ng-option>
            </ng-select>
            <span class="text-danger"
              *ngIf="form.get('country_id').invalid && form.get('country_id').dirty">{{'share.required' |translate}}</span>
          </div>


          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 m-b-12">
            <label class="label"> {{'employee.city' | translate }}
            </label>
            <ng-select placeholder="{{'employee.city'|translate}}" [multiple]="false" formControlName="city_id">
              <ng-option *ngFor="let row of cities" [value]="row.id" [disabled]="row.disabled">
                {{languageService.getLanguageOrDefault()=='ar' ? row.name_arabic :row.name_english}}</ng-option>
            </ng-select>
            <span class="text-danger"
              *ngIf="form.get('city_id').invalid && form.get('city_id').dirty">{{'share.required' |translate}}</span>
          </div>

          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-12">
            <label class="label"> {{'employee.role' | translate }}
            </label>
            <ng-select [closeOnSelect]="false" placeholder="{{'employee.role'|translate}}" [multiple]="true"
              formControlName="roles">
              <ng-option *ngFor="let row of roles" [value]="row.id" [disabled]="row.disabled">
                {{languageService.getLanguageOrDefault()=='ar' ? row.name_arabic :row.name_english}}</ng-option>
            </ng-select>
            <span class="text-danger"
              *ngIf="form.get('roles').invalid && form.get('roles').dirty">{{'share.required' |translate}}</span>
          </div>

          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12  m-t-20">
            <button nbButton status="info" ghost (click)="changePasswort()">
              {{'share.changePassword' |translate}}
            </button>
          </div>

        </div>
        <div class="row">
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 m-b-12 ">
            <nb-radio-group class="d-flex" formControlName="gender" name="gender">
              <nb-radio value="Female">
                {{'share.female' |translate}}
              </nb-radio>
              <nb-radio value="Male">
                {{'share.male' |translate}}
              </nb-radio>
            </nb-radio-group>
          </div>

        </div>

        <div class="row m-t-10">
          <div class="col-sm-4">
            <div class="form-group">
              <button type="submit" fullWidth (click)="save()" class="save">{{'share.Save'|translate}}</button>
            </div>
            </div>
            </div>
      </form>
    </ng-container>


  </nb-card-body>
</nb-card>